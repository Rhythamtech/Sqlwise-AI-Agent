[
  {
    "id": "schema:overview",
    "text": "E-commerce analytics database schema with 7 tables: metadata (data dictionary), sessions (browsing sessions with UTM tracking), pageviews (page load events), orders (purchase transactions), order_items (line items), products (catalog), refunds (returns). Key relationships: sessions->orders->order_items->refunds. Revenue and COGS calculated at order_items level.",
    "metadata": {
      "doc_type": "schema_overview",
      "domain": "ecommerce"
    }
  },
  {
    "id": "table:metadata",
    "text": "Table: metadata. Data dictionary table with columns [Table] (nvarchar 25), [Field] (varchar 60), [Description] (varchar 128). Stores human-readable field descriptions.",
    "metadata": {
      "doc_type": "table",
      "table": "metadata"
    }
  },
  {
    "id": "table:sessions",
    "text": "Table: sessions. Tracks user browsing sessions. Primary key: session_id. Contains user_id, created_at, is_repeat_session, marketing attribution (utm_source, utm_campaign, utm_content), device_type, http_referer. Join to orders via session_id and to pageviews via session_id.",
    "metadata": {
      "doc_type": "table",
      "table": "sessions"
    }
  },
  {
    "id": "table:pageviews",
    "text": "Table: pageviews. Records individual page loads. Primary key: pageview_id. Contains created_at, session_id (FK to sessions), pageview_url. Used for engagement and funnel analysis.",
    "metadata": {
      "doc_type": "table",
      "table": "pageviews"
    }
  },
  {
    "id": "table:orders",
    "text": "Table: orders. Purchase transactions. Primary key: order_id. Contains created_at, session_id (FK to sessions), user_id, primary_product_id, items_purchased, price_usd, price_inr, cogs_usd, cogs_inr. Join to order_items via order_id. Order-level fields are aggregates; order_items is source of truth for revenue/COGS.",
    "metadata": {
      "doc_type": "table",
      "table": "orders"
    }
  },
  {
    "id": "table:order_items",
    "text": "Table: order_items. Line items within orders. Primary key: order_item_id. Contains order_id (FK to orders), created_at, product_id (FK to products), is_primary_item (1=primary, 0=addon), price_usd, price_inr, cogs_usd, cogs_inr. This is the canonical source for all revenue and COGS calculations.",
    "metadata": {
      "doc_type": "table",
      "table": "order_items"
    }
  },
  {
    "id": "table:products",
    "text": "Table: products. Product catalog. Primary key: product_id. Contains created_at, product_name (varchar 128). Referenced by order_items.product_id and orders.primary_product_id.",
    "metadata": {
      "doc_type": "table",
      "table": "products"
    }
  },
  {
    "id": "table:refunds",
    "text": "Table: refunds. Money returned to customers. Primary key: refund_id. Contains created_at, order_item_id (FK to order_items), order_id (FK to orders), refund_amount_usd, refund_amount_inr. Refunds reduce net revenue but do NOT reduce COGS.",
    "metadata": {
      "doc_type": "table",
      "table": "refunds"
    }
  }
]